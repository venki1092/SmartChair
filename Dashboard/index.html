<!doctype html>
<html lang="en" class="no-js">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">
	<meta name="theme-color" content="#3e454c">
	
	<title>Smart Chair</title>

	<!-- Font awesome -->
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<!-- Sandstone Bootstrap CSS -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<!-- Bootstrap Datatables -->
	<link rel="stylesheet" href="css/dataTables.bootstrap.min.css">
	<!-- Bootstrap social button library -->
	<link rel="stylesheet" href="css/bootstrap-social.css">
	<!-- Bootstrap select -->
	<link rel="stylesheet" href="css/bootstrap-select.css">
	<!-- Bootstrap file input -->
	<link rel="stylesheet" href="css/fileinput.min.css">
	<!-- Awesome Bootstrap checkbox -->
	<link rel="stylesheet" href="css/awesome-bootstrap-checkbox.css">
	<!-- Admin Stye -->
	<link rel="stylesheet" href="css/style.css">

	<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->        
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
  
</head>

<body>

	<div class="brand clearfix">
		<a href="index.html" class="logo"><img src="img/logo.jpg" class="img-responsive" alt=""></a>
		<span class="menu-btn"><i class="fa fa-bars"></i></span>
		<!-- 
		<ul class="ts-profile-nav">
			<li><a href="#">Help</a></li>
			<li><a href="#">Settings</a></li>
			<li class="ts-account">
				<a href="#"><img src="img/ts-avatar.jpg" class="ts-avatar hidden-side" alt=""> Account <i class="fa fa-angle-down hidden-side"></i></a>
				<ul>
				 	<li><a href="#">My Account</a></li>
					<li><a href="#">Edit Account</a></li> 
					<li><a href="#">About Us</a></li>
				</ul>
			</li>
		</ul>
		-->
	</div>

	<div class="ts-main-content">
		<nav class="ts-sidebar">
			<ul class="ts-sidebar-menu">
				<li class="ts-label">Search</li>
				<li>
					<input type="text" class="ts-sidebar-search" placeholder="Search here...">
				</li>
				<li class="ts-label">Main</li>
				<li class="open"><a href="index.html"><i class="fa fa-dashboard"></i> Dashboard</a></li>
				
				<li><a href="#"><i class="fa fa-desktop"></i> Chairs List</a>
					<ul>
						<li>
                            <a id="chair1" onClick="generateChairCharts(this)" href = "index.html">Chair 1</a>
                        </li>
                        <li>
                            <a id="chair2" onClick="generateChairCharts(this)" href = "index.html">Chair 2</a>
                        </li>
                        <li>
                            <a id="chair3" onClick="generateChairCharts(this)" href = "index.html">Chair 3</a>
                        </li>
                        <li>
                            <a id="chair4" onClick="generateChairCharts(this)" href = "index.html">Chair 4</a>
                        </li>
					</ul>
				</li>
				<!-- <li><a href="tables.html"><i class="fa fa-table"></i> Tables</a></li> -->
				<!--  <li><a href="forms.html"><i class="fa fa-edit"></i> Forms</a></li> -->
				<!-- <li><a href="charts.html"><i class="fa fa-pie-chart"></i> Charts</a></li> -->
				<!--
				<li><a href="#"><i class="fa fa-sitemap"></i> Multi-Level Dropdown</a>
					<ul>
						<li><a href="#">2nd level</a></li>
						<li><a href="#">2nd level</a></li>
						<li><a href="#">3rd level</a>
							<ul>
								<li><a href="#">3rd level</a></li>
								<li><a href="#">3rd level</a></li>
							</ul>
						</li>
					</ul>
				</li>
				-->
				<li><a href="#"><i class="fa fa-files-o"></i> Settings</a>
					<ul>
						 <li><a href="blank.html">Time</a></li> 
						<li><a href="login.html">Unsubscribe</a></li>
					</ul>
				</li>

				<!-- Account from above -->
				<!--
				<ul class="ts-profile-nav">
					<li><a href="#">Help</a></li>
					<li><a href="#">Settings</a></li>
					<li class="ts-account">
						<a href="#"><img src="img/ts-avatar.jpg" class="ts-avatar hidden-side" alt=""> Account <i class="fa fa-angle-down hidden-side"></i></a>
						<ul>
							<li><a href="#">My Account</a></li>
							<li><a href="#">Edit Account</a></li>
							<li><a href="#">Logout</a></li>
						</ul>
					</li>
				</ul>
				-->
			</ul>
		</nav>
		<div class="content-wrapper">
			<div class="container-fluid">
						<h2 class="page-title">Chair Usage Stats</h2>
                        <p>Enter Date for getting the values from the past 7 days: <input type="text" id="datepicker"></p>
						
						<div class="row">
							<div class="col-md-6">
                                <div id="container" style="width: 800px; height: 400px; margin: 0 auto"></div>	
                            </div>
                            <div class="col-md-6">
                                <div id="barchart" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
                            </div>
						</div>
			</div>
		</div>
	</div>

	<!-- Loading Scripts -->
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap-select.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.dataTables.min.js"></script>
	<script src="js/dataTables.bootstrap.min.js"></script>
	<script src="js/Chart.min.js"></script>
	<script src="js/fileinput.js"></script>
	<script src="js/chartData.js"></script>
	<script src="js/main.js"></script>
    
    <script>
  $(function() {
    $( "#datepicker" ).datepicker();
    $("#datepicker").change(function(){
        var date=document.getElementById("datepicker");
        //alert(date.value);
        if(date.value.length==10){
            var res = date.value.split("/");
            //var urlval='http://ec2-54-201-103-178.us-west-2.compute.amazonaws.com:8080/sm/webapi/stats/'+res[2]+'/'+res[1]+'/'+res[0];
            alert(urlval);
            $.ajax({
                url: urlval ,
                success: function(point) {
                   // var values=[parseInt(point.day1),parseInt(point.day2),parseInt(point.day3),parseInt(point.day4),parseInt(point.day5),parseInt(point.day6),parseInt(point.day7)];
                   var values=[];
                    values.push(parseInt(point.day1));
                    values.push(parseInt(point.day2));
                    values.push(parseInt(point.day3));
                    values.push(parseInt(point.day4));
                    values.push(parseInt(point.day5));
                    values.push(parseInt(point.day6));
                    values.push(parseInt(point.day7));
                   // var values = ["1","2","3","4","5","6","7"];
                    var chart1 = new Highcharts.Chart({
                        chart: {
                            renderTo: 'barchart',
                            type: 'column'                
                        },
                        title: {
                            text: 'Week Stats'
                        },
                        subtitle: {
                            text: ''
                        },
                        xAxis: {
                            categories: [
                                'Day1',
                                'Day2',
                                'Day3',
                                'Day4',
                                'Day5',
                                'Day6',
                                'Day7',
                            ],
                            crosshair: true
                        },
                        yAxis: {
                            min: 0,
                            title: {
                                text: 'Degree of harmfulness'
                            }
                        },
                        tooltip: {
                            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                                '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
                            footerFormat: '</table>',
                            shared: true,
                            useHTML: true
                        },
                        plotOptions: {
                            column: {
                                pointPadding: 0.2,
                                borderWidth: 0
                            }
                        },
                        series: [{
                            name: 'Last seven days',
                            data: values                    
                        }]
                    });
                },
                async: false,
                cache: false
            });
        }
    });
  });
  
  
  </script>
	
	<script>	
	window.onload = function(){
		// Line chart from swirlData for dashReport
		var ctx = document.getElementById("dashReport").getContext("2d");
		window.myLine = new Chart(ctx).Line(swirlData, {
			responsive: true,
			scaleShowVerticalLines: false,
			scaleBeginAtZero : true,
			multiTooltipTemplate: "<%if (label){%><%=label%>: <%}%><%= value %>",
		}); 
		
		// Pie Chart from doughutData
		var doctx = document.getElementById("chart-area3").getContext("2d");
		window.myDoughnut = new Chart(doctx).Pie(doughnutData, {responsive : true});

		// Dougnut Chart from doughnutData
		var doctx = document.getElementById("chart-area4").getContext("2d");
		window.myDoughnut = new Chart(doctx).Doughnut(doughnutData, {responsive : true});
	}
	</script>
    <script type="text/javascript">
    var chart;
    $(document).ready(function() {
        
        $.ajax({
            url: 'http://ec2-54-201-103-178.us-west-2.compute.amazonaws.com:8080/sm/webapi/stats/2015/01/02',
            success: function(point) {
               // var values=[parseInt(point.day1),parseInt(point.day2),parseInt(point.day3),parseInt(point.day4),parseInt(point.day5),parseInt(point.day6),parseInt(point.day7)];
               var values=[];
                values.push(parseInt(point.day1));
                values.push(parseInt(point.day2));
                values.push(parseInt(point.day3));
                values.push(parseInt(point.day4));
                values.push(parseInt(point.day5));
                values.push(parseInt(point.day6));
                values.push(parseInt(point.day7));
               // var values = ["1","2","3","4","5","6","7"];
                var chart1 = new Highcharts.Chart({
                    chart: {
                        renderTo: 'barchart',
                        type: 'column'                
                    },
                    title: {
                        text: 'Week Stats'
                    },
                    subtitle: {
                        text: ''
                    },
                    xAxis: {
                        categories: [
                            'Day1',
                            'Day2',
                            'Day3',
                            'Day4',
                            'Day5',
                            'Day6',
                            'Day7',
                        ],
                        crosshair: true
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: 'Degree of harmfullness'
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                            '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
                        footerFormat: '</table>',
                        shared: true,
                        useHTML: true
                    },
                    plotOptions: {
                        column: {
                            pointPadding: 0.2,
                            borderWidth: 0
                        }
                    },
                    series: [{
                        name: 'Last seven days',
                        data: values                    
                    }]
                });
            },
            async: false,
            cache: false
        });
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                defaultSeriesType: 'spline',
                events: {
                    load: requestData
                }
            },
            title: {
                text: 'Posture is Harmful?'
            },
            xAxis: {
                type: 'datetime',
                tickPixelInterval: 150,
                maxZoom: 20 * 1000
            },
            yAxis: {
                minPadding: 0.2,
                maxPadding: 0.2,
                title: {
                    text: 'Value',
                    margin: 80
                }
            },
            series: [{
                name: 'Is Harmful?',
                data: []
            }]
        });
    });        
    function requestData() {
        var b=[];
        $.ajax({
            url: 'http://ec2-54-201-103-178.us-west-2.compute.amazonaws.com:8080/sm/webapi/livechart',
            success: function(point) {
                var series = chart.series[0],
                    shift = series.data.length > 20; // shift if the series is 
                                                     // longer than 20
                    
                // add the point
                //chart.series[0].addPoint(10, true, shift);
                var a=(new Date() / 1000 | 0)*1000;
                
                b.push(a);
                b.push(parseInt(point.data));
                chart.series[0].addPoint(b, true, shift);
                setTimeout(requestData, 1000);    
            },
            cache: false
        });
   
    } 
    
</script>
 <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!Balaaaaa-->
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
		  
		   $.ajax({
            url: 'http://ec2-54-201-103-178.us-west-2.compute.amazonaws.com:8080/sm/webapi/piechart/2016/05/04',
            success: function(point) {
				
                
				var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Correct Position',     parseInt(point.p1)],
          ['You are Sitting the edge',      parseInt(point.p2)],
          ['Please straighten your posture',  parseInt(point.p3)],
          ['You are Leaning Front', parseInt(point.p4)],
          ['You are with the chair',    parseInt(point.p5)],
		  ['Reclining well',    parseInt(point.p6)],
		  ['Reclining too much',    parseInt(point.p7)]
        ]);

        var options = {
          title: 'Sitting Posture Split up for the day'
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
            },
            cache: false
        });

        
      }
    </script>
    <div class="col-md-3">
    </div>
    <div class="col-md-3">
    <div id="piechart" class="col-lg-1 center-block" style="width: 900px; height: 500px;"></div>
    </div>
    
    

   
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">

</body>

</html>
